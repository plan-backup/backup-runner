INFO:__main__:üöÄ Starting MongoDB Latest Build & Test Pipeline
INFO:__main__:============================================================
INFO:__main__:üìã Step 1: Starting test database...
INFO:__main__:üçÉ Starting MongoDB latest container...
INFO:__main__:‚úÖ MongoDB container 'planb_test_mongodb_latest_1758656379' started on port 27396
INFO:__main__:‚è≥ Waiting for MongoDB to be ready...
INFO:__main__:‚úÖ MongoDB is ready!
INFO:__main__:üìã Step 2: Starting MinIO S3 storage...
INFO:__main__:üì¶ Starting MinIO S3-compatible storage container...
INFO:__main__:‚è≥ Waiting for MinIO to be ready...
INFO:__main__:‚úÖ MinIO is ready!
INFO:__main__:‚úÖ MinIO bucket 'planb-backups' created successfully
INFO:__main__:üìã Step 3: Setting up test data...
INFO:__main__:üìä Setting up test data...
INFO:__main__:‚úÖ Test data created: 3 movies, 3 actors
INFO:__main__:üìã Step 4: Building Plan B container...
INFO:__main__:üî® Building Plan B MongoDB container for testing...
INFO:__main__:‚úÖ Container built successfully for local testing!
INFO:__main__:üìã Step 5: Testing complete backup pipeline...
INFO:__main__:üíæ Testing complete backup pipeline with our container...
INFO:__main__:‚ñ∂Ô∏è  Running complete backup pipeline using our Plan B container...
INFO:__main__:Using MinIO container name: planb_test_minio_1758656382
ERROR:__main__:Container execution failed: Command '['python3', '/usr/local/bin/runner.py']' in image 'gcr.io/apito-cms/plan-b-backup-mongodb:test-latest' returned non-zero exit status 1: b'INFO:__main__:\xf0\x9f\x94\xa7 Initializing MongoDB runner...\nINFO:__main__:\xf0\x9f\x94\xa7 Environment variables loaded\nINFO:__main__:\xf0\x9f\x94\xa7 Initializing S3 client with endpoint: http://host.docker.internal:9379\nINFO:__main__:\xf0\x9f\x94\xa7 Storage type: s3\nINFO:__main__:\xf0\x9f\x94\xa7 Storage bucket: planb-backups\nINFO:__main__:\xf0\x9f\x94\xa7 Storage region: us-east-1\nINFO:__main__:\xf0\x9f\x94\xa7 Using custom endpoint with SSL: False\nINFO:__main__:\xe2\x9c\x85 S3 client initialized for endpoint: http://host.docker.internal:9379\nINFO:__main__:\xf0\x9f\x94\xa7 Testing S3 connectivity...\nINFO:__main__:\xe2\x9c\x85 S3 connectivity test successful\nINFO:__main__:\xf0\x9f\x8d\x83 Creating MongoDB backup for database: planb_testdb\nINFO:__main__:\xe2\x96\xb6\xef\xb8\x8f  Running mongodump command: mongodump --host planb_test_mongodb_latest_1758656379:27017 --db [auth hidden]\nINFO:__main__:\xf0\x9f\x94\x8d Checking temp directory contents: []\nERROR:__main__:\xe2\x9d\x8c An unexpected error occurred during backup: mongodump succeeded but dump directory not found: /tmp/tmpsyb60j29/dump\nERROR:__main__:Fatal error: mongodump succeeded but dump directory not found: /tmp/tmpsyb60j29/dump\nINFO:__main__:Skipping callback: No CALLBACK_URL provided.\n'
ERROR:__main__:‚ùå Backup pipeline failed: Command '['python3', '/usr/local/bin/runner.py']' in image 'gcr.io/apito-cms/plan-b-backup-mongodb:test-latest' returned non-zero exit status 1: b'INFO:__main__:\xf0\x9f\x94\xa7 Initializing MongoDB runner...\nINFO:__main__:\xf0\x9f\x94\xa7 Environment variables loaded\nINFO:__main__:\xf0\x9f\x94\xa7 Initializing S3 client with endpoint: http://host.docker.internal:9379\nINFO:__main__:\xf0\x9f\x94\xa7 Storage type: s3\nINFO:__main__:\xf0\x9f\x94\xa7 Storage bucket: planb-backups\nINFO:__main__:\xf0\x9f\x94\xa7 Storage region: us-east-1\nINFO:__main__:\xf0\x9f\x94\xa7 Using custom endpoint with SSL: False\nINFO:__main__:\xe2\x9c\x85 S3 client initialized for endpoint: http://host.docker.internal:9379\nINFO:__main__:\xf0\x9f\x94\xa7 Testing S3 connectivity...\nINFO:__main__:\xe2\x9c\x85 S3 connectivity test successful\nINFO:__main__:\xf0\x9f\x8d\x83 Creating MongoDB backup for database: planb_testdb\nINFO:__main__:\xe2\x96\xb6\xef\xb8\x8f  Running mongodump command: mongodump --host planb_test_mongodb_latest_1758656379:27017 --db [auth hidden]\nINFO:__main__:\xf0\x9f\x94\x8d Checking temp directory contents: []\nERROR:__main__:\xe2\x9d\x8c An unexpected error occurred during backup: mongodump succeeded but dump directory not found: /tmp/tmpsyb60j29/dump\nERROR:__main__:Fatal error: mongodump succeeded but dump directory not found: /tmp/tmpsyb60j29/dump\nINFO:__main__:Skipping callback: No CALLBACK_URL provided.\n'
ERROR:__main__:‚ùå Backup stdout: 
INFO:__main__:üßπ Cleaning up...
INFO:__main__:‚úÖ MongoDB test container stopped
INFO:__main__:‚úÖ MinIO test container stopped
INFO:__main__:‚úÖ Test network removed
